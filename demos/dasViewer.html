<!DOCTYPE HTML>
<html lang="en"> 

<head> 

    <title></title> 
    <script src="../js/Scribl.min.js"></script>
    <!-- <script src="../src/Scribl.class.js" ></script>
    <script src="../src/Scribl.js" ></script>
    <script src="../src/Scribl.track.js" ></script>
    <script src="../src/Scribl.lane.js" ></script>
    <script src="../src/Scribl.events.js" ></script>
    <script src="../src/Scribl.utils.js" ></script>
    <script src="../src/Scribl.svg.js" ></script>
    <script src="../src/Scribl.glyph.js" ></script>
    <script src="../src/glyph/Scribl.blockarrow.js" ></script>
    <script src="../src/glyph/Scribl.arrow.js" ></script>
    <script src="../src/glyph/Scribl.rect.js" ></script>
    <script src="../src/glyph/Scribl.line.js" ></script>
    <script src="../src/glyph/Scribl.complex.js" ></script>      -->
		
   <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
   <!-- <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/> -->
   <link rel="stylesheet" type="text/css" href="../css/jquery-ui-1.8.13.redmond.css" />
   <link rel="stylesheet" type="text/css" href="../css/dasViewer.css" />
   <script src="../js/jquery-ui.chase.min.js"></script>
   <script src="../js/jsdas.0.1.6.js" ></script>
    
    <script type="text/javascript">    
    		   var sources = [];
            var noScale = true;
    		   var scriblMin = 1;
    		   var scriblMax = 150000;
    		   var slideMin = scriblMin;
    		   var slideMax = scriblMax;
    		   var viewerMin = 20000;
    		   var viewerMax = 80000;
    		   var splash = true;
    		   var addSourcePanelShowing = false;
    		   var aboutShowing = false;
    		   var bufferSize = 100000;
    		   var minBufferSize = 50000;
    		   var charts = new Array();
    		   var DasRequest = function() { this.xhr=undefined; this.min=undefined; this.max=undefined };
    		   var View = function(canvas) {
    		      this.expanded = new Scribl(canvas, getChartWidth());
    		      this.collapsed = new Scribl(canvas, getChartWidth());;
    		      this.chart = this.collapsed;
    		      this.dasRequests=[] 
    		   };
    		   

    		   $(document).ready(function() {
               
    		      	
    		      $( "#slider-range" ).slider({
                   range: true,
                   min: slideMin,
                   max: slideMax,
                   values: [ viewerMin, viewerMax ],
                   slide: function( event, ui ) {
                      redraw( ui.values[ 0 ], ui.values[ 1 ]);
                   }
                });
                
                toggleSplashPage();
                
                // bind checkboxes to click
                $(function() {$("#sourcePanel input").click( function() {handleDasSourceCheckbox(this)} ) }); 
                
                loadUrlQuery();
                
                // watch for enter key on jump input box
                $("#jump").keyup(function(event) {
                   // check for enter key
                  if(event.keyCode == 13) {     
                    jump();
                  }
                });                
                
                // watch for enter key on chromosome box
                $("#chromosome").keyup(function(event) {
                   // check for enter key
                  if(event.keyCode == 13) {     
                    updateSources();
                  }
                });
                
    		   });

       		function handleDasSourceCheckbox(checkbox) {
       		   
       		   if( $(checkbox).is(':checked') ) {
       		      // if first sequence draw scale
       		      if ($('#canvasList').children().length == 0) {
       		         splash = false;
       		         if (noScale) initScale();
       		         noScale = false;
       		         toggleSplashPage();
       		      }
       		      
       		      // create elements
       		      var canvasList = document.getElementById("canvasList");
       		      var parentDiv = document.createElement('div');
       		      parentDiv.className = "canvas-div";
       		      var optionDiv = document.createElement('div');
       		      optionDiv.className = "option-control";
       		      var newCanvas = document.createElement("canvas");
       		      newCanvas.id = getCheckBoxLabel(checkbox);
       		      var label = document.createElement("span");


       		      // associate elements
       		      canvasList.appendChild(parentDiv);
       		      parentDiv.appendChild(label);
       		      parentDiv.appendChild(newCanvas);
       		      parentDiv.appendChild(optionDiv);

       		      // create label
       		      label.innerHTML = getCheckBoxLabel(checkbox);
       		      label.className = "canvas-label";

       		      // handle option menu
       		      parentDiv.onmouseover = function() {toggleOptionMenu(true, optionDiv)};
       		      parentDiv.onmouseout = function() {toggleOptionMenu(false, optionDiv)};
       		      parentDiv.id = getCheckBoxLabel(checkbox) + "-parentdiv";


       		      // option menu buttons
       		      // gear button
       		      var gear = document.createElement('span');
       		      gear.style.float = 'left';
       		      //gear.innerHTML = "<a href='#'><span class='ui-icon ui-icon-gear'></a></span><span class='ui-icon ui-icon-triangle-1-s'></span>";
                   gear.innerHTML = "<a style='float:left' href='#'><span class='ui-icon ui-icon-gear'></a></span><span class='ui-icon ui-icon-triangle-1-s'></span>";

       		      gear.onmouseover = function() {$(gear).addClass('option-hover');};
       		      gear.onmouseout = function() {$(gear).removeClass('option-hover');}   		      
       		      optionDiv.appendChild(gear);


       		      // close button
       		      var close = document.createElement('span');
       		      close.style.float = 'right';
       		      close.innerHTML = "<a href='#'><span style='float:right; border-left: 1px solid white' class='ui-icon ui-icon-close'></span></a>";
       		      close.onmouseover = function() {$(close).addClass('option-hover');};
       		      close.onmouseout = function() {$(close).removeClass('option-hover');}
       		      close.onclick = function() {removeCanvas(getCheckBoxLabel(checkbox));}
       		      optionDiv.appendChild(close);
       		      optionDiv.appendChild(document.createElement('br'));

       		      // menu panel
       		      var menuPanel = document.createElement('ul');
       		      menuPanel.className = 'subnav';
       		      menuPanel.style.display = 'none';
       		      var li = document.createElement('li');
       		      li.id = newCanvas.id + '-expand-option'
       		      li.onclick = function() { toggleExpand(newCanvas.id, li);}
       		      li.innerHTML = "<a href='#'>Expand</a>";
       		      menuPanel.appendChild(li);
       		      optionDiv.appendChild(menuPanel);

       		      // handle additional events on menu
       		      gear.onclick = function() { handleOptionMenuClick(menuPanel); };   		      
       		      $(optionDiv).mouseleave(function() {$(menuPanel).slideUp('fast'); })

       		      // set canvas attributes
       		      newCanvas.width = getCanvasWidth() -30;
       		      newCanvas.height = '20px';
       		      newCanvas.className = "canvas";   		      

     		         // create chart
       		      var request = new DasRequest;
   		         var view = new View(newCanvas);
   		         view.dasRequests.push(request);				
   		         charts[newCanvas.id] = undefined;

       				// get DAS data
       				var baseurl = $(checkbox).val();
       				var url = baseurl + '/features?segment=' + $('#chromosome').val() + ':' + scriblMin + "," + scriblMax + ';type=refGene';   				
       				request.xhr = JSDAS.features(url, function(response, view) { dasResponse(response, view) }, function() {}, "", view);
       				
       		   } else {
       		      removeCanvas(getCheckBoxLabel(checkbox));
       		   }

             }

          	function getCheckBoxLabel(checkbox){
          	   return ($(checkbox).next().text());
          	}

          	function removeCanvas(canvasId){
          	   
          	   // uncheck boxp
          	   var canvas = document.getElementById(canvasId);
          	   document.getElementById(canvas.id + "-input").checked = false;

          	   // delete div that holds canvas
          	   var toDel = document.getElementById(canvas.id + "-parentdiv");
          	   $(toDel).remove();

               // check if view is empty and if so bring up splash page
          	   if ($('#canvasList').children().length == 0) {
    		         splash = true;
    		         toggleSplashPage();
    		      }

          	   // abort in progress das requests
          	   var chartId = canvasId.split('-input')[0]
          	   var requests = charts[chartId].dasRequests;
          	   var requestNum = requests.length;      	   
          	   for( var i=0; i < requestNum; i++) 
          	      requests[i].xhr.abort();

          	   // delete chart from list
          	   delete charts[chartId];
          	}

          	function initScale() {
                var canvas = document.createElement("canvas");
                canvas.id = 'scale';
                canvas.className = 'canvas';
                canvas.height = 40;
                canvas.width = getCanvasWidth()-1;
                $('#scaleDiv').prepend(canvas);

          	   scale = new Scribl(canvas, getChartWidth());
          	   scale.scale.font.size = 14;
          	   scale.scale.auto = false;
    				scale.scale.min = $('#slider-range').slider('values',0);
    				scale.scale.max = $('#slider-range').slider('values',1);
    				scale.draw();
          	}

          	function handleOptionMenuClick(menu) {
                $(menu).slideDown('fast').show(); //Drop down the subnav on click
                // 
                $(menu).mouseleave( function() {
                   $(menu).slideUp('slow'); //When the mouse hovers out of the subnav, move it back up
                });

          	}
          	
          	function toggleSplashPage(){
          	   if (!splash) {
          	      $('#splash').css('display', 'none')
          	      $('#viewer').css('display', 'inline')
          	      splash = false
       	      } else {
       	         $('#splash').css('display', 'inline')
          	      $('#viewer').css('display', 'none')
          	      splash = true;
       	      }
          	}

          	function toggleOptionMenu(over, obj) {

             	if (over) { 
             	   obj.style.display = "inline";
             	}
             	else {
                   obj.style.display = "none";
                }
             }

             function toggleDasSources() {
                if (addSourcePanelShowing) {
                   addSourcePanelShowing = false;
                   document.getElementById('sourcePanel').style.display = "inherit";
                   document.getElementById('addSourcePanel').style.display = "none";                   
                } else {
                   addSourcePanelShowing = true;
                   document.getElementById('sourcePanel').style.display = "none";
                   document.getElementById('addSourcePanel').style.display = "inherit";                   
                }
             }
             
             function toggleAbout() {
                if (aboutShowing) {
                   aboutShowing = false;
                   document.getElementById('sourcePanel').style.display = "inherit";
                   document.getElementById('about').style.display = "none";                   
                } else {
                   aboutShowing = true;
                   document.getElementById('sourcePanel').style.display = "none";
                   document.getElementById('about').style.display = "inherit";                   
                }
             }
             
             function userAddDas() {
                addDas($('#dasname').val(), $('#dassource').val());
                toggleDasSources();
             }

             function addDas(name, url) {
                
                // create uniform base url
                url = url.replace(/\/$/,'');
                
                var li = document.createElement('li');
                document.getElementById('source-list').appendChild(li);
                var checkbox = document.createElement('input')
                li.appendChild(checkbox);
                var label = document.createElement('label');            
                li.appendChild(label);
                checkbox.type = "checkbox";
                checkbox.value = url;
                checkbox.id = name + '-input';
                label.for = checkbox.id;
                $(checkbox).next().text(name);
                $(checkbox).click( function() {handleDasSourceCheckbox(checkbox)} );               
             }             

    		   function dasResponse(response, view) {
    		      var collapsed = view.collapsed;
    		      var expanded = view.expanded
    		      var chart = view.chart;
    		      var track = chart.addTrack().addLane();
    		      var canvasId = chart.canvas.id

    				// check if chart is still visible
    				if(!charts.hasOwnProperty(canvasId)) {
    				   return;
    				}

    				var features = response.GFF.SEGMENT[0].FEATURE;
                if (!features) {
                   // TODO add an error fetching message
                   return; 
                }
    				for (var i=0; i < features.length; i++) {
    					var f = features[i];
    					var start = parseInt(f.START.textContent);
    					var length =  parseInt(f.END.textContent) - start;
    					if (f.ORIENTATION) {
    						orientation =  f.ORIENTATION.textContent;
    						var glyph = track.addGene(start, length, orientation);
    					} else
    						var glyph = track.addFeature( new Rect( "rect", start, length) );

    					if (f.TYPE.textContent) glyph.name = f.TYPE.textContent;
    					if(f.LINK && f.LINK[0] && f.LINK[0].href) { 
    						//glyph.onMouseover = f.TYPE.textContent + "\n" + f.LINK[0].textContent || f.LINK[0].href;
    						//glyph.onClick = f.LINK[0].href.replace(":8080", "");
    					}
    				}
    				chart.ctx.clearRect(0,0,chart.canvas.width, chart.canvas.height);
    				chart.laneSizes = 13; // set lanesizes so getHeight will be accurate
    				chart.canvas.height = chart.getHeight() - 30;

    				// check again for race cases
    				if(!charts.hasOwnProperty(canvasId))
    				   return;
    				charts[canvasId] = view;
    				draw(chart, $( "#slider-range" ).slider( "values", 0 ), $( "#slider-range" ).slider( "values", 1 ));
    				//chart.draw();
    			}
    
            function toggleLinkUrl() {
               if( $('#link-url').css('display') == 'none' ) {
                  $('#link-url-input').val(serializeToUrl());
                  $('#link-url').css('display', 'inherit')
               }
               else
                  $('#link-url').css('display', 'none')
            }

    			function toggleExpand(canvasId, li) {
    			      var chart = charts[canvasId].chart;   			   

    			   // expand chart
    			   if (li.children[0].innerHTML == 'Expand') {
       			   li.children[0].innerHTML = 'Collapse'
       			   var features = chart.tracks[0].lanes[0].features;
       			   chart.tracks = [];
       			   features.sort( function(a,b){ return(a.position - b.position); } );
       			   chart.loadFeatures(features);
    			   } else { // collapse chart 
    			      li.children[0].innerHTML = 'Expand'
    			      var features = [];
    			      var numLanes = chart.tracks[0].lanes.length;
    			      for(var k=0; k<numLanes; k++){
    			         features = features.concat(chart.tracks[0].lanes[k].features)
    			      }
    			      chart.tracks = [];
    			      chart.addTrack().addLane().loadFeatures(features);
    			   }

    			   chart.canvas.height = chart.getHeight() - 30;
    			   draw(chart, $('#slider-range').slider('values',0), $('#slider-range').slider('values',1));
    			}

             function draw(chart, newMin, newMax) {            
                newChart = chart.slice(newMin, newMax);
                newChart.scale.off = true;
                newChart.scale.pretty = false;
             //   newChart.scale.offset = false;
                newChart.laneSizes = 13;
                newChart.ctx.clearRect(0, 0, newChart.canvas.width, newChart.canvas.height);
                newChart.scale.min = newMin;
                newChart.scale.max = newMax;
                newChart.draw();
             }

             function redraw(min, max, updateSliders) {
                
                //eventCounter += 1;
                if (max > (scriblMax - minBufferSize) || (min < (scriblMin + minBufferSize)  && scriblMin > 1 ))
                   updateSources(min, max, updateSliders);
                   
                // update slideMin/Max
                if (slideMax * .99 < max ) {
                   var change = Math.round((slideMax-slideMin)*.005); 
                   slideMax += change;
                   slideMin += change; 
                   $( "#slider-range" ).slider('option', 'max', slideMax);
                   $( "#slider-range" ).slider('option', 'min', slideMin);
                } 
                if (slideMin * 1.01 > min ) {
                   var change = Math.round((slideMax-slideMin)*.005); 
                   slideMax -= change;
                   slideMin -= change; 
                   $( "#slider-range" ).slider('option', 'max', slideMax);
                   $( "#slider-range" ).slider('option', 'min', slideMin);
                }
                

                // draw scale
                scale.ctx.clearRect(0, 0, scale.canvas.width, scale.canvas.height);
                // hack to fix scale bug
                if (min == 1) min = 0;
                scale.scale.min = min;
                scale.scale.max = max;
                scale.draw();

                // draw tracks
                if ( min > scriblMin || max < scriblMax) {
                  for (i in charts) 
                     draw( charts[i].chart, min, max);
                }
             }

             function updateSources(min, max, updateSliders) {
                // check if min max have not changed
                min = min || $('#slider-range').slider('values',0);
                max = max || $('#slider-range').slider('values',1);

                // determine new scriblMax and scriblMin
                scriblMax = max + bufferSize;
                scriblMin= Math.max(min-bufferSize,1);
                
                // update sliders                
                if (updateSliders) {
                  $('#slider-range').slider('values',0, min);
                  $('#slider-range').slider('values',1, max);
                }                

                // grab new coordinates for sources
                for (canvasId in charts) {
                  var request = new DasRequest;
                  var view = new View(charts[canvasId].chart.canvas);
                  view.dasRequests.push(request);
                  
                  var baseurl = document.getElementById(canvasId+'-input').value
                  var url = baseurl + '/features?segment=' + $('#chromosome').val() + ':'  + scriblMin + "," + scriblMax + ';type=refGene';
                  request.xhr = JSDAS.features(url, function(response, view) { dasResponse(response, view) }, function(){}, "", view);
                }            
             }

             function getCanvasWidth(){return($(window).width() * .84);}
             function getChartWidth(){return ($(window).width() * .84 - 40); }
             
             function jump() {
                var jumpTo = parseInt($('#jump').val());
                var range = parseInt($('#slider-range').slider('values',1) - $('#slider-range').slider('values',0));
                var min = jumpTo - range/2;
                var max = jumpTo + range/2;
                slideMin = min - bufferSize;
                slideMax = max + bufferSize;
                $( "#slider-range" ).slider('option', 'max', slideMax);
                $( "#slider-range" ).slider('option', 'min', slideMin);
                redraw(min, max, true);
             }
             
             function getUrlQuerys(){
                // get the current URL
                 var url = window.location.toString();
                 url = url.replace('#', '');
                 //get the parameters
                 url.match(/\?(.+)$/);
                 var params = RegExp.$1;
                 // split up the query string and store in an
                 // associative array
                 var params = params.split("&");
                 var queryStringList = {};

                 for(var i=0;i<params.length;i++) {
                     var tmp = params[i].split("=");
                     queryStringList[tmp[0]] = unescape(tmp[1]);
                 }
                 return (queryStringList);
             }
             
             function serializeToUrl() {
                var checkboxes = $('#source-list').find('input');
                                
                // get urls
                var sourceUrls = [];
                checkboxes.each( function(index, value){sourceUrls.push(value.value)});
                
                // get names
                var sourceNames = [];
                checkboxes.each( function(index, value){sourceNames.push(value.id.replace(/-input$/,''))});
                
                var trackOptions = [];
                for(var i=0; i< sourceNames.length; i++){
                   var expandOption = sourceNames[i] + '-expand-option';
                   
                   // check if source is being displayed
                   var menu = document.getElementById(expandOption);
                   if (menu)
                     trackOptions.push(menu.children[0].innerHTML)
                  else
                     trackOptions.push('none');
                }                
                
                // get min, max, chromosome
                var min = $('#slider-range').slider('values',0);
                var max = $('#slider-range').slider('values',1);
                var chr = $('#chromosome').val();
                
                // construct query string
                var queryStr = "?"
                queryStr += "urls=" + sourceUrls.join(',');
                queryStr += "&names=" + sourceNames.join(',');
                queryStr += "&min=" + min;
                queryStr += "&max=" + max;
                queryStr += "&display=" + trackOptions.join(',');
                queryStr += "&segment=" + chr;
                
                return (getBaseURL() + queryStr);                               
             }
             
             function getBaseURL() {
                 var url = location.href;  // entire url including querystring - also: window.location.href;
                 var baseURL = url.split('?')[0]
                 return baseURL;
             }
             
             function loadUrlQuery() {
                //parse url querys (if any)
                var querys = getUrlQuerys();
                
                if (querys != "" && Object.keys(querys).length > 0 && Object.keys(querys)[0] != "" ) {
                
                   // set region
                   var min = parseInt(querys['min']);
                   var max = parseInt(querys['max'])
                   if(querys['min'] && querys['max']) {
                      slideMin = scriblMin = Math.max(min - bufferSize,1);
                      slideMax = scriblMax = parseInt(max + bufferSize);
                      $( "#slider-range" ).slider('option', 'min', slideMin);
                      $( "#slider-range" ).slider('option', 'max', slideMax);
                      $('#slider-range').slider('values',0, min);
                      $('#slider-range').slider('values',1, max);
                   }
                   
                   // set chromosome
                   $('#chromosome').val( querys['segment'] );
                   
                   // add Das sources                   
                   var urls = querys['urls'].split(',');
                   var names = querys['names'].split(',');
                   for (var k=0; k < names.length; k++){
                      addDas(names[k], urls[k]);
                   }
                
                   // set display
                   var displays = querys['display'].split(',');
                   for (var i=0; i < displays.length; i++) {
                      if (displays[i] == 'Expand' || displays[i] == 'Collapse'){
                        var cb = document.getElementById(names[i] + '-input');
                        cb.checked = true;
                        $(cb).click();
                        cb.checked = true; // click unchecks it so re-check it
                      }
                   }
                }
             }

    		</script>

</head> 
     
<body> 

    <div id="header">
       DAS Browser
    </div> 
     
    <div id="content"> 
       <div id="side">
          <div id="sourcePanel">
    	      <br/> 
    	      <div id="dasTitle">DAS Sources</div>
    	      <div id="subtitle">check boxes to add data</div>
    	      <ul id="source-list">
    	         <!-- id must be the same as text appended with input -->
             <!-- <li><input id="Homo sapiens NCBI36-input" value="http://useast.ensembl.org/das/Homo_sapiens.NCBI36.transcript/" type="checkbox"></input><label>Homo sapiens NCBI36</label></li>
             <li><input id="hg16-input" value="http://genome.ucsc.edu/cgi-bin/das/hg16/" type="checkbox"></input><label for="hg16-input">hg16</label></li>
             <li><input id="hg18-input" value="http://genome.cse.ucsc.edu:80/cgi-bin/das/hg18/" type="checkbox"></input><label for="hg18-input">hg18</label></li>
              <li><input id ="ens_36_refseq-input" value="http://das.sanger.ac.uk/das/ens_36_refseq/" type="checkbox"></input><label for="ens_36_refseq-input">ens_36_refseq</label></li>
              <li><input id="MeDIP-chip Cervix-input" value="http://www.ebi.ac.uk/das-srv/genomicdas/das/batman_CX/" type="checkbox"></input><label for="MeDIP-chip Cervix-input">MeDIP-chip Cervix</label></li>   -->           
    	      </ul>
    	   </div>
    	   <div id="addSourcePanel">
            <br/>
            <div>
               DAS Source URL: <input id="dassource" type="text" name="dassource" /><br />
               Source Name: <input id="dasname" type="text" name="dasname" />
               <br/>
               <a href="#" class="myButton" onClick="userAddDas()" alt="hi">Add</a>
               <a href="#" class="myButton" onClick="toggleDasSources()" alt="hi">X</a>  
               <div style="margin-top:20px; padding:11px; font-size:12px">More DAS sources can be found at the 
                  <a href="http://www.dasregistry.org/listSources.jsp?organism=any&CSName=any&CSTypes=any&capabilities=features&labels=any&spec=any&cmd=find">DAS registry</a>          
               </div>
            </div>
         </div>
         <div id='about'>
            <p>DAS Browser is a HTML5 Genome Browser that displays annotation data from any database that supports the <a href='http://www.biodas.org/wiki/Main_Page'>DAS</a> protocol.</p><p>DAS sources can be added from the <a href="http://www.dasregistry.org/listSources.jsp?organism=any&CSName=any&CSTypes=any&capabilities=features&labels=any&spec=any&cmd=find">DAS registry</a> by clicking add source at the bottom of the DAS Source pane.</p>
            <br/>
            <a href="#" class="myButton" onClick="toggleAbout()" >X</a>
         </div>
       </div>
       
       <div id="main">
          <br/>
          <div id='splash'>
             <p>To get started <a href="#" onClick="toggleDasSources()">add DAS sources</a> to see annotation data</p>
             <p>Or</p>
             <p>Try out a <a href='http://chmille4.github.com/Scribl/demos/dasViewer.html?urls=http://useast.ensembl.org/das/Homo_sapiens.NCBI36.transcript,http://genome.cse.ucsc.edu:80/cgi-bin/das/hg18,http://das.sanger.ac.uk/das/ens_36_refseq&names=Homo%20sapiens%20NCBI36,UCSC%20NCBI36/hg18,ens_NCBI36_refseq&min=1135445&max=1187569&display=Expand,Expand,Expand&segment=1' onClick='location.reload(true)'>demo</a> with pre-selected sources</p>
             <p style="font-size: 13px"><a href="#" onClick="toggleAbout()">About DAS Browser</a></p>
          </div>
             <div id='viewer'>   
             <div id="controls">
                <div id="pan">pan/zoom</div>
                <div id="slider-range" class="slider"></div>
             </div>         
             <div id="scaleDiv"></div>      
             <div id="top-controls">

                   <div style="float:left; margin-left:5px">
                      Chromosome <input style="margin-right:40px" value="1" id='chromosome'></input>
                   </div>
                   <div style="float:left">
                         Jump To <input id="jump" style="width:10em" id='jump-to'></input>
                   </div>
                   <div style="float:right; margin-right:10px">
                      <a href="#" onClick='toggleLinkUrl()' title="Link to current view"style="margin-right:10px">Link</a><a href='#' onClick="toggleAbout()">About</a>
                   </div>
             </div>  
          
             <div id="canvas-content">
                <div id="canvasList"></div>
                <div id="link-url">Link to current view<br/><input id="link-url-input"></input></div>
             </div>
          </div>
          
       </div>

       
    </div> 
    <a id="sourcePanelToolbar" href='#'><div  onClick="toggleDasSources()"><span id="plus" style="margin-left: 15%; margin-bottom: -1.3em" class='ui-icon ui-icon-plus'></span> Add Source</div></a>
    
    <div id="footer">
      <div style="width=30%;margin-left:auto; margin-right:auto; margin-top: 10px">
         Powered By <a href="http://chmille4.github.com/Scribl/">Scibl</a>
      </div>
      <div style="float:right; margin-right:20px; margin-top:-6px">&copy; <a href="http://github.com/chmille4">Chase Miller</a> 2011</div>
    </div> 

</body> 

</html>